use std::{convert::TryFrom, mem::transmute};

use qmpi_sys::{_MPI_funcs::*, NUM_MPI_FUNCS};

pub const MPI_FUNCTION_COUNT: u16 = NUM_MPI_FUNCS as u16;
pub const SUPPORTED_MPI_FUNCTION_COUNT: u16 = 360; // future proof

#[allow(non_camel_case_types)]
#[non_exhaustive]
#[derive(Debug, Copy, Clone, PartialEq, Eq)]
#[repr(u16)]
pub enum MpiFunctionId {
    Abort = _MPI_Abort as u16,
    Accumulate = _MPI_Accumulate as u16,
    Add_error_class = _MPI_Add_error_class as u16,
    Add_error_code = _MPI_Add_error_code as u16,
    Add_error_string = _MPI_Add_error_string as u16,
    Address = _MPI_Address as u16,
    Allgather = _MPI_Allgather as u16,
    Allgatherv = _MPI_Allgatherv as u16,
    Alloc_mem = _MPI_Alloc_mem as u16,
    Allreduce = _MPI_Allreduce as u16,
    Alltoall = _MPI_Alltoall as u16,
    Alltoallv = _MPI_Alltoallv as u16,
    Alltoallw = _MPI_Alltoallw as u16,
    Attr_delete = _MPI_Attr_delete as u16,
    Attr_get = _MPI_Attr_get as u16,
    Attr_put = _MPI_Attr_put as u16,
    Barrier = _MPI_Barrier as u16,
    Bcast = _MPI_Bcast as u16,
    Bsend = _MPI_Bsend as u16,
    Bsend_init = _MPI_Bsend_init as u16,
    Buffer_attach = _MPI_Buffer_attach as u16,
    Buffer_detach = _MPI_Buffer_detach as u16,
    Cancel = _MPI_Cancel as u16,
    Cart_coords = _MPI_Cart_coords as u16,
    Cart_create = _MPI_Cart_create as u16,
    Cart_get = _MPI_Cart_get as u16,
    Cart_map = _MPI_Cart_map as u16,
    Cart_rank = _MPI_Cart_rank as u16,
    Cart_shift = _MPI_Cart_shift as u16,
    Cart_sub = _MPI_Cart_sub as u16,
    Cartdim_get = _MPI_Cartdim_get as u16,
    Close_port = _MPI_Close_port as u16,
    Comm_accept = _MPI_Comm_accept as u16,
    Comm_call_errhandler = _MPI_Comm_call_errhandler as u16,
    Comm_compare = _MPI_Comm_compare as u16,
    Comm_connect = _MPI_Comm_connect as u16,
    Comm_create = _MPI_Comm_create as u16,
    Comm_create_errhandler = _MPI_Comm_create_errhandler as u16,
    Comm_create_group = _MPI_Comm_create_group as u16,
    Comm_create_keyval = _MPI_Comm_create_keyval as u16,
    Comm_delete_attr = _MPI_Comm_delete_attr as u16,
    Comm_disconnect = _MPI_Comm_disconnect as u16,
    Comm_dup = _MPI_Comm_dup as u16,
    Comm_dup_with_info = _MPI_Comm_dup_with_info as u16,
    Comm_free = _MPI_Comm_free as u16,
    Comm_free_keyval = _MPI_Comm_free_keyval as u16,
    Comm_get_attr = _MPI_Comm_get_attr as u16,
    Comm_get_errhandler = _MPI_Comm_get_errhandler as u16,
    Comm_get_info = _MPI_Comm_get_info as u16,
    Comm_get_name = _MPI_Comm_get_name as u16,
    Comm_get_parent = _MPI_Comm_get_parent as u16,
    Comm_group = _MPI_Comm_group as u16,
    Comm_idup = _MPI_Comm_idup as u16,
    Comm_join = _MPI_Comm_join as u16,
    Comm_rank = _MPI_Comm_rank as u16,
    Comm_remote_group = _MPI_Comm_remote_group as u16,
    Comm_remote_size = _MPI_Comm_remote_size as u16,
    Comm_set_attr = _MPI_Comm_set_attr as u16,
    Comm_set_errhandler = _MPI_Comm_set_errhandler as u16,
    Comm_set_info = _MPI_Comm_set_info as u16,
    Comm_set_name = _MPI_Comm_set_name as u16,
    Comm_size = _MPI_Comm_size as u16,
    Comm_split = _MPI_Comm_split as u16,
    Comm_split_type = _MPI_Comm_split_type as u16,
    Comm_test_inter = _MPI_Comm_test_inter as u16,
    Compare_and_swap = _MPI_Compare_and_swap as u16,
    Dims_create = _MPI_Dims_create as u16,
    Dist_graph_create = _MPI_Dist_graph_create as u16,
    Dist_graph_create_adjacent = _MPI_Dist_graph_create_adjacent as u16,
    Dist_graph_neighbors = _MPI_Dist_graph_neighbors as u16,
    Dist_graph_neighbors_count = _MPI_Dist_graph_neighbors_count as u16,
    Errhandler_create = _MPI_Errhandler_create as u16,
    Errhandler_free = _MPI_Errhandler_free as u16,
    Errhandler_get = _MPI_Errhandler_get as u16,
    Errhandler_set = _MPI_Errhandler_set as u16,
    Error_class = _MPI_Error_class as u16,
    Error_string = _MPI_Error_string as u16,
    Exscan = _MPI_Exscan as u16,
    Fetch_and_op = _MPI_Fetch_and_op as u16,
    File_call_errhandler = _MPI_File_call_errhandler as u16,
    File_close = _MPI_File_close as u16,
    File_create_errhandler = _MPI_File_create_errhandler as u16,
    File_delete = _MPI_File_delete as u16,
    File_get_amode = _MPI_File_get_amode as u16,
    File_get_atomicity = _MPI_File_get_atomicity as u16,
    File_get_byte_offset = _MPI_File_get_byte_offset as u16,
    File_get_errhandler = _MPI_File_get_errhandler as u16,
    File_get_group = _MPI_File_get_group as u16,
    File_get_info = _MPI_File_get_info as u16,
    File_get_position = _MPI_File_get_position as u16,
    File_get_position_shared = _MPI_File_get_position_shared as u16,
    File_get_size = _MPI_File_get_size as u16,
    File_get_type_extent = _MPI_File_get_type_extent as u16,
    File_get_view = _MPI_File_get_view as u16,
    File_iread = _MPI_File_iread as u16,
    File_iread_all = _MPI_File_iread_all as u16,
    File_iread_at = _MPI_File_iread_at as u16,
    File_iread_at_all = _MPI_File_iread_at_all as u16,
    File_iread_shared = _MPI_File_iread_shared as u16,
    File_iwrite = _MPI_File_iwrite as u16,
    File_iwrite_all = _MPI_File_iwrite_all as u16,
    File_iwrite_at = _MPI_File_iwrite_at as u16,
    File_iwrite_at_all = _MPI_File_iwrite_at_all as u16,
    File_iwrite_shared = _MPI_File_iwrite_shared as u16,
    File_open = _MPI_File_open as u16,
    File_preallocate = _MPI_File_preallocate as u16,
    File_read = _MPI_File_read as u16,
    File_read_all = _MPI_File_read_all as u16,
    File_read_all_begin = _MPI_File_read_all_begin as u16,
    File_read_all_end = _MPI_File_read_all_end as u16,
    File_read_at = _MPI_File_read_at as u16,
    File_read_at_all = _MPI_File_read_at_all as u16,
    File_read_at_all_begin = _MPI_File_read_at_all_begin as u16,
    File_read_at_all_end = _MPI_File_read_at_all_end as u16,
    File_read_ordered = _MPI_File_read_ordered as u16,
    File_read_ordered_begin = _MPI_File_read_ordered_begin as u16,
    File_read_ordered_end = _MPI_File_read_ordered_end as u16,
    File_read_shared = _MPI_File_read_shared as u16,
    File_seek = _MPI_File_seek as u16,
    File_seek_shared = _MPI_File_seek_shared as u16,
    File_set_atomicity = _MPI_File_set_atomicity as u16,
    File_set_errhandler = _MPI_File_set_errhandler as u16,
    File_set_info = _MPI_File_set_info as u16,
    File_set_size = _MPI_File_set_size as u16,
    File_set_view = _MPI_File_set_view as u16,
    File_sync = _MPI_File_sync as u16,
    File_write = _MPI_File_write as u16,
    File_write_all = _MPI_File_write_all as u16,
    File_write_all_begin = _MPI_File_write_all_begin as u16,
    File_write_all_end = _MPI_File_write_all_end as u16,
    File_write_at = _MPI_File_write_at as u16,
    File_write_at_all = _MPI_File_write_at_all as u16,
    File_write_at_all_begin = _MPI_File_write_at_all_begin as u16,
    File_write_at_all_end = _MPI_File_write_at_all_end as u16,
    File_write_ordered = _MPI_File_write_ordered as u16,
    File_write_ordered_begin = _MPI_File_write_ordered_begin as u16,
    File_write_ordered_end = _MPI_File_write_ordered_end as u16,
    File_write_shared = _MPI_File_write_shared as u16,
    Finalize = _MPI_Finalize as u16,
    Finalized = _MPI_Finalized as u16,
    Free_mem = _MPI_Free_mem as u16,
    Gather = _MPI_Gather as u16,
    Gatherv = _MPI_Gatherv as u16,
    Get = _MPI_Get as u16,
    Get_accumulate = _MPI_Get_accumulate as u16,
    Get_address = _MPI_Get_address as u16,
    Get_count = _MPI_Get_count as u16,
    Get_elements = _MPI_Get_elements as u16,
    Get_elements_x = _MPI_Get_elements_x as u16,
    Get_library_version = _MPI_Get_library_version as u16,
    Get_processor_name = _MPI_Get_processor_name as u16,
    Get_version = _MPI_Get_version as u16,
    Graph_create = _MPI_Graph_create as u16,
    Graph_get = _MPI_Graph_get as u16,
    Graph_map = _MPI_Graph_map as u16,
    Graph_neighbors = _MPI_Graph_neighbors as u16,
    Graph_neighbors_count = _MPI_Graph_neighbors_count as u16,
    Graphdims_get = _MPI_Graphdims_get as u16,
    Grequest_complete = _MPI_Grequest_complete as u16,
    Grequest_start = _MPI_Grequest_start as u16,
    Group_compare = _MPI_Group_compare as u16,
    Group_difference = _MPI_Group_difference as u16,
    Group_excl = _MPI_Group_excl as u16,
    Group_free = _MPI_Group_free as u16,
    Group_incl = _MPI_Group_incl as u16,
    Group_intersection = _MPI_Group_intersection as u16,
    Group_range_excl = _MPI_Group_range_excl as u16,
    Group_range_incl = _MPI_Group_range_incl as u16,
    Group_rank = _MPI_Group_rank as u16,
    Group_size = _MPI_Group_size as u16,
    Group_translate_ranks = _MPI_Group_translate_ranks as u16,
    Group_union = _MPI_Group_union as u16,
    Iallgather = _MPI_Iallgather as u16,
    Iallgatherv = _MPI_Iallgatherv as u16,
    Iallreduce = _MPI_Iallreduce as u16,
    Ialltoall = _MPI_Ialltoall as u16,
    Ialltoallv = _MPI_Ialltoallv as u16,
    Ialltoallw = _MPI_Ialltoallw as u16,
    Ibarrier = _MPI_Ibarrier as u16,
    Ibcast = _MPI_Ibcast as u16,
    Ibsend = _MPI_Ibsend as u16,
    Iexscan = _MPI_Iexscan as u16,
    Igather = _MPI_Igather as u16,
    Igatherv = _MPI_Igatherv as u16,
    Improbe = _MPI_Improbe as u16,
    Imrecv = _MPI_Imrecv as u16,
    Ineighbor_allgather = _MPI_Ineighbor_allgather as u16,
    Ineighbor_allgatherv = _MPI_Ineighbor_allgatherv as u16,
    Ineighbor_alltoall = _MPI_Ineighbor_alltoall as u16,
    Ineighbor_alltoallv = _MPI_Ineighbor_alltoallv as u16,
    Ineighbor_alltoallw = _MPI_Ineighbor_alltoallw as u16,
    Info_create = _MPI_Info_create as u16,
    Info_delete = _MPI_Info_delete as u16,
    Info_dup = _MPI_Info_dup as u16,
    Info_free = _MPI_Info_free as u16,
    Info_get = _MPI_Info_get as u16,
    Info_get_nkeys = _MPI_Info_get_nkeys as u16,
    Info_get_nthkey = _MPI_Info_get_nthkey as u16,
    Info_get_valuelen = _MPI_Info_get_valuelen as u16,
    Info_set = _MPI_Info_set as u16,
    Init = _MPI_Init as u16,
    Init_thread = _MPI_Init_thread as u16,
    Initialized = _MPI_Initialized as u16,
    Intercomm_create = _MPI_Intercomm_create as u16,
    Intercomm_merge = _MPI_Intercomm_merge as u16,
    Iprobe = _MPI_Iprobe as u16,
    Irecv = _MPI_Irecv as u16,
    Ireduce = _MPI_Ireduce as u16,
    Ireduce_scatter = _MPI_Ireduce_scatter as u16,
    Ireduce_scatter_block = _MPI_Ireduce_scatter_block as u16,
    Irsend = _MPI_Irsend as u16,
    Is_thread_main = _MPI_Is_thread_main as u16,
    Iscan = _MPI_Iscan as u16,
    Iscatter = _MPI_Iscatter as u16,
    Iscatterv = _MPI_Iscatterv as u16,
    Isend = _MPI_Isend as u16,
    Issend = _MPI_Issend as u16,
    Keyval_create = _MPI_Keyval_create as u16,
    Keyval_free = _MPI_Keyval_free as u16,
    Lookup_name = _MPI_Lookup_name as u16,
    Mprobe = _MPI_Mprobe as u16,
    Mrecv = _MPI_Mrecv as u16,
    Neighbor_allgather = _MPI_Neighbor_allgather as u16,
    Neighbor_allgatherv = _MPI_Neighbor_allgatherv as u16,
    Neighbor_alltoall = _MPI_Neighbor_alltoall as u16,
    Neighbor_alltoallv = _MPI_Neighbor_alltoallv as u16,
    Neighbor_alltoallw = _MPI_Neighbor_alltoallw as u16,
    Op_commutative = _MPI_Op_commutative as u16,
    Op_create = _MPI_Op_create as u16,
    Op_free = _MPI_Op_free as u16,
    Open_port = _MPI_Open_port as u16,
    Pack = _MPI_Pack as u16,
    Pack_external = _MPI_Pack_external as u16,
    Pack_external_size = _MPI_Pack_external_size as u16,
    Pack_size = _MPI_Pack_size as u16,
    Pcontrol = _MPI_Pcontrol as u16,
    Probe = _MPI_Probe as u16,
    Publish_name = _MPI_Publish_name as u16,
    Put = _MPI_Put as u16,
    Query_thread = _MPI_Query_thread as u16,
    Raccumulate = _MPI_Raccumulate as u16,
    Recv = _MPI_Recv as u16,
    Recv_init = _MPI_Recv_init as u16,
    Reduce = _MPI_Reduce as u16,
    Reduce_local = _MPI_Reduce_local as u16,
    Reduce_scatter = _MPI_Reduce_scatter as u16,
    Reduce_scatter_block = _MPI_Reduce_scatter_block as u16,
    Register_datarep = _MPI_Register_datarep as u16,
    Request_free = _MPI_Request_free as u16,
    Request_get_status = _MPI_Request_get_status as u16,
    Rget = _MPI_Rget as u16,
    Rget_accumulate = _MPI_Rget_accumulate as u16,
    Rput = _MPI_Rput as u16,
    Rsend = _MPI_Rsend as u16,
    Rsend_init = _MPI_Rsend_init as u16,
    Scan = _MPI_Scan as u16,
    Scatter = _MPI_Scatter as u16,
    Scatterv = _MPI_Scatterv as u16,
    Send = _MPI_Send as u16,
    Send_init = _MPI_Send_init as u16,
    Sendrecv = _MPI_Sendrecv as u16,
    Sendrecv_replace = _MPI_Sendrecv_replace as u16,
    Ssend = _MPI_Ssend as u16,
    Ssend_init = _MPI_Ssend_init as u16,
    Start = _MPI_Start as u16,
    Startall = _MPI_Startall as u16,
    Status_set_cancelled = _MPI_Status_set_cancelled as u16,
    Status_set_elements = _MPI_Status_set_elements as u16,
    Status_set_elements_x = _MPI_Status_set_elements_x as u16,
    Test = _MPI_Test as u16,
    Test_cancelled = _MPI_Test_cancelled as u16,
    Testall = _MPI_Testall as u16,
    Testany = _MPI_Testany as u16,
    Testsome = _MPI_Testsome as u16,
    Topo_test = _MPI_Topo_test as u16,
    Type_commit = _MPI_Type_commit as u16,
    Type_contiguous = _MPI_Type_contiguous as u16,
    Type_create_darray = _MPI_Type_create_darray as u16,
    Type_create_f90_complex = _MPI_Type_create_f90_complex as u16,
    Type_create_f90_integer = _MPI_Type_create_f90_integer as u16,
    Type_create_f90_real = _MPI_Type_create_f90_real as u16,
    Type_create_hindexed = _MPI_Type_create_hindexed as u16,
    Type_create_hindexed_block = _MPI_Type_create_hindexed_block as u16,
    Type_create_hvector = _MPI_Type_create_hvector as u16,
    Type_create_indexed_block = _MPI_Type_create_indexed_block as u16,
    Type_create_keyval = _MPI_Type_create_keyval as u16,
    Type_create_resized = _MPI_Type_create_resized as u16,
    Type_create_struct = _MPI_Type_create_struct as u16,
    Type_create_subarray = _MPI_Type_create_subarray as u16,
    Type_delete_attr = _MPI_Type_delete_attr as u16,
    Type_dup = _MPI_Type_dup as u16,
    Type_extent = _MPI_Type_extent as u16,
    Type_free = _MPI_Type_free as u16,
    Type_free_keyval = _MPI_Type_free_keyval as u16,
    Type_get_attr = _MPI_Type_get_attr as u16,
    Type_get_contents = _MPI_Type_get_contents as u16,
    Type_get_envelope = _MPI_Type_get_envelope as u16,
    Type_get_extent = _MPI_Type_get_extent as u16,
    Type_get_extent_x = _MPI_Type_get_extent_x as u16,
    Type_get_name = _MPI_Type_get_name as u16,
    Type_get_true_extent = _MPI_Type_get_true_extent as u16,
    Type_get_true_extent_x = _MPI_Type_get_true_extent_x as u16,
    Type_hindexed = _MPI_Type_hindexed as u16,
    Type_hvector = _MPI_Type_hvector as u16,
    Type_indexed = _MPI_Type_indexed as u16,
    Type_lb = _MPI_Type_lb as u16,
    Type_match_size = _MPI_Type_match_size as u16,
    Type_set_attr = _MPI_Type_set_attr as u16,
    Type_set_name = _MPI_Type_set_name as u16,
    Type_size = _MPI_Type_size as u16,
    Type_size_x = _MPI_Type_size_x as u16,
    Type_struct = _MPI_Type_struct as u16,
    Type_ub = _MPI_Type_ub as u16,
    Type_vector = _MPI_Type_vector as u16,
    Unpack = _MPI_Unpack as u16,
    Unpack_external = _MPI_Unpack_external as u16,
    Unpublish_name = _MPI_Unpublish_name as u16,
    Wait = _MPI_Wait as u16,
    Waitall = _MPI_Waitall as u16,
    Waitany = _MPI_Waitany as u16,
    Waitsome = _MPI_Waitsome as u16,
    Win_allocate = _MPI_Win_allocate as u16,
    Win_allocate_shared = _MPI_Win_allocate_shared as u16,
    Win_attach = _MPI_Win_attach as u16,
    Win_call_errhandler = _MPI_Win_call_errhandler as u16,
    Win_complete = _MPI_Win_complete as u16,
    Win_create = _MPI_Win_create as u16,
    Win_create_dynamic = _MPI_Win_create_dynamic as u16,
    Win_create_errhandler = _MPI_Win_create_errhandler as u16,
    Win_create_keyval = _MPI_Win_create_keyval as u16,
    Win_delete_attr = _MPI_Win_delete_attr as u16,
    Win_detach = _MPI_Win_detach as u16,
    Win_fence = _MPI_Win_fence as u16,
    Win_flush = _MPI_Win_flush as u16,
    Win_flush_all = _MPI_Win_flush_all as u16,
    Win_flush_local = _MPI_Win_flush_local as u16,
    Win_flush_local_all = _MPI_Win_flush_local_all as u16,
    Win_free = _MPI_Win_free as u16,
    Win_free_keyval = _MPI_Win_free_keyval as u16,
    Win_get_attr = _MPI_Win_get_attr as u16,
    Win_get_errhandler = _MPI_Win_get_errhandler as u16,
    Win_get_group = _MPI_Win_get_group as u16,
    Win_get_info = _MPI_Win_get_info as u16,
    Win_get_name = _MPI_Win_get_name as u16,
    Win_lock = _MPI_Win_lock as u16,
    Win_lock_all = _MPI_Win_lock_all as u16,
    Win_post = _MPI_Win_post as u16,
    Win_set_attr = _MPI_Win_set_attr as u16,
    Win_set_errhandler = _MPI_Win_set_errhandler as u16,
    Win_set_info = _MPI_Win_set_info as u16,
    Win_set_name = _MPI_Win_set_name as u16,
    Win_shared_query = _MPI_Win_shared_query as u16,
    Win_start = _MPI_Win_start as u16,
    Win_sync = _MPI_Win_sync as u16,
    Win_test = _MPI_Win_test as u16,
    Win_unlock = _MPI_Win_unlock as u16,
    Win_unlock_all = _MPI_Win_unlock_all as u16,
    Win_wait = _MPI_Win_wait as u16,
    Wtick = _MPI_Wtick as u16,
    Wtime = _MPI_Wtime as u16,
}
impl TryFrom<u16> for MpiFunctionId {
    type Error = ();
    #[inline]
    fn try_from(id: u16) -> Result<Self, Self::Error> {
        if id < SUPPORTED_MPI_FUNCTION_COUNT {
            Ok(unsafe { transmute::<u16, Self>(id) })
        } else {
            Err(())
        }
    }
}
